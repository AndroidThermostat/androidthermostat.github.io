
<!DOCTYPE html>
<!--[if IE 7]>
<html class="ie ie7" lang="en-US">
<![endif]-->
<!--[if IE 8]>
<html class="ie ie8" lang="en-US">
<![endif]-->
<!--[if !(IE 7) | !(IE 8)  ]><!-->
<html lang="en-US">
<!--<![endif]-->
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width" />
<title>Android Thermostat | A DIY Open Source Thermostat</title>
<!--[if lt IE 9]>
<script src="/javascripts/html5.js" type="text/javascript"></script>
<![endif]-->
<link rel='stylesheet' id='twentytwelve-fonts-css'  href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700&#038;subset=latin,latin-ext' type='text/css' media='all' />
<link rel='stylesheet' id='twentytwelve-style-css'  href='/stylesheets/style.css?ver=3.5.1' type='text/css' media='all' />
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentytwelve-ie-css'  href='/stylesheets/ie.css?ver=20121010' type='text/css' media='all' />
<![endif]-->
</head>

<body class="home page page-id-88 page-template page-template-page-templatesfront-page-php full-width template-front-page custom-font-enabled single-author">
<div id="page" class="hfeed site">
  <header id="masthead" class="site-header" role="banner">
    <hgroup>
      <h1 class="site-title"><a href="/" title="Android Thermostat" rel="home">Android Thermostat</a></h1>
      <h2 class="site-description">A DIY Open Source Thermostat</h2>
    </hgroup>

    <nav id="site-navigation" class="main-navigation" role="navigation">
      <h3 class="menu-toggle">Menu</h3>
      <div class="menu-home-container"><ul id="menu-home" class="nav-menu"><li id="menu-item-60" class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item current_page_item menu-item-60"><a href="/">Home</a></li>
<li id="menu-item-301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-301"><a href="/assembly-instructions/">Assembly Instructions</a></li>
<li id="menu-item-174" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-174"><a href="http://www.reddit.com/r/AndroidThermostat/">Community</a></li>
</ul></div>   </nav><!-- #site-navigation -->

      </header><!-- #masthead -->

  <div id="main" class="wrapper">
  <div id="primary" class="site-content">
    <div id="content" role="main">

              
        
  <article id="post-88" class="post-88 page type-page status-publish hentry">
    <header class="entry-header">
      <h1 class="entry-title">Introducing Android Thermostat</h1>
    </header>






    
    <div class="entry-content">
      <p><em>Revision B -&nbsp;</em><em style="line-height: 1.714285714; font-size: 1rem;">These instructions are for Revision B of the hardware.  If you have the components for the Revision A build, please see the <a href="/assembly-instructions-rev-a">Revision A</a> instructions. &nbsp;As always, this is an open source hardware project built mostly by amateurs and there are no warranties, so build at your own risk.</em></p>
<p>The primary goals for this revision was to simplify the assembly process and reduce the requirement for special machines in order to make it a viable project for a wider audience.  I believe this has largely been accomplished by going to a printed circuit board which has eliminated the need for a laser cutter, etching solution, a drill press and a lot of time.  <del datetime="2013-04-23T02:01:31+00:00">The only remaining peice of specialized equipment that is still needed is a 3d printer</del>.  A 3d printer is no longer a requirement either.  You can <a href="http://www.makexyz.com/3dprinters/?o=0&amp;sign=0f8b39756d3038088332b9cbd8ce3e83&amp;ref=769b1238471bb402b29f95952c6ae8f2">order a print from here</a> and even pick it up locally in most major cities.</p>
<h1><strong>Parts List</strong></h1>
<p><strong></strong>Here are the parts you will need for this project and their price at the time these instructions were published:</p>
<p><strong>SparkFun<br>
<a href="http://androidthermostat.com/wp-content/uploads/2013/04/Components.jpg"><img src="http://androidthermostat.com/wp-content/uploads/2013/04/Components.jpg" alt="" title="Components" width="600" height="600" class="alignright size-full wp-image-281"></a><br>
</strong></p>
<ul>
<li><a href="https://www.sparkfun.com/products/11343">1x – IOIO OTG – $39.95</a></li>
<li><a href="https://www.sparkfun.com/products/10988">1x – Temperature Sensor – $1.50</a></li>
</ul>
<p><strong>Mouser</strong></p>
<ul>
<li><a href="http://www.mouser.com/ProductDetail/Phoenix-Contact/1935200/?qs=%2fha2pyFaduhyGAHO0gKMpwWI2%2foV1M5sHCE0UFp2YJ4%3d">1x – 6 Pin Terminal Block – $1.08</a></li>
<li><a href="http://www.mouser.com/ProductDetail/Vishay/KBL06-E4-51/?qs=%2fha2pyFadug6Nx3c2IQYpFF7gjpvBYjkNX5R6Ou124wlNATaVu44Iw%3d%3d">1x – Bridge Rectifier – $0.91</a></li>
<li><a  href="http://www.mouser.com/Search/ProductDetail.aspx?R=42375-1247virtualkey53810000virtualkey538-42375-1247">2x – Break-Away Male Headers – $0.38</a></li>
<li><a href="http://www.mouser.com/ProductDetail/Omron-Electronics/G5LE-14-DC5/?qs=sGAEpiMZZMtSzCF3XBhmW%2f7R2vaP0U3c7rouljqC5CM%3d">3x – Relays – $3.24</a></li>
<li><a href="http://www.mouser.com/ProductDetail/Fairchild-Semiconductor/2N7000_D26Z/?qs=sGAEpiMZZMsrr1kXJis%252bJ8MxWVZeJ9%252bzKmtxFyLBonI%3d">3x – Transistors – $0.27</a></li>
<li><a href="http://www.mouser.com/Search/ProductDetail.aspx?R=BAW76-TAPvirtualkey61370000virtualkey78-BAW76-TAP">3x – Diodes – $0.15</a></li>
<li><a href="http://www.mouser.com/ProductDetail/EPCOS/B41827A8107M000/?qs=sGAEpiMZZMsh%252b1woXyUXj%252bo0JChp315mznpwqPRhM4o%3d">1x – 100uf Capacitor – $0.10</a></li>
<li><a href="http://www.mouser.com/ProductDetail/EPCOS/B41827A9106M000/?qs=sGAEpiMZZMsh%252b1woXyUXj%252bo0JChp315mo5a90H0XYa4%3d">2x – 10uf Capacitor – $0.14</a></li>
<li><a href="http://www.mouser.com/ProductDetail/Vishay-Sprague/1C10Z5U104M050B/?qs=sGAEpiMZZMuMW9TJLBQkXuP0rItz7gptz7jNMXhVbX0%3d">1x – 0.1uF Ceramic Capacitor – $0.10</a></li>
<li><a href="http://www.mouser.com/ProductDetail/Xicon/299-100K-RC/?qs=sGAEpiMZZMtlubZbdhIBIBS6fxCtzmQI26gcI2Nrqt4%3d">4x – 100kOhm Resistors – $0.40</a></li>
</ul>
<p><strong>Digikey</strong></p>
<ul>
<li><a href="http://www.digikey.com/product-detail/en/V7815W-500R/102-2457-ND/2757928">1X – Switching Regulator – $13.34</a></li>
</ul>
<p><strong>Amazon</strong></p>
<ul>
<li><a href="http://www.amazon.com/gp/product/B005QX7KYU/">1X – Right angle USB-OTG cable – $1.64</a></li>
<li><a href="http://www.amazon.com/gp/product/B003YKX6WC/">1X – Right angle Micro-B USB cable – $4.10</a></li>
</ul>
<p>Total: $67.30 (Plus $20 for circuit boards)</p>
<h2>Step 1 – Order the Circuit Board(s)</h2>
<p><a href="http://androidthermostat.com/wp-content/uploads/2013/04/Board.jpg"><img src="http://androidthermostat.com/wp-content/uploads/2013/04/Board.jpg" alt="" title="Board" width="800" height="358" class="size-full wp-image-283"></a></p>
<p>You will need to order your circuit board(s) from a third party shop.  The cheapest option I have found so far is <a href="http://oshpark.com/">OSH Park</a>, which will print 3 copies of the board for $20.  You only need one copy for this project, so I’d suggest selling your extra copies at <a href="http://www.reddit.com/r/AndroidThermostat/comments/1brby4/buysell_android_thermostat_cases_and_boards/">this thread</a> or buying a single print from there.</p>
<p>If you decide to order prints, you will need to download the <a href="https://github.com/AndroidThermostat/Board/raw/master/Revision%20B/GerberRevB.zip">Gerber files</a>.  Just upload the zip file to OSHPark (or another shop) and they’ll guide you through the rest. &nbsp;It takes about 2-3 weeks for OSH Park to deliver the boards if you go this route.</p>
<h1>Step 2 – Update the Firmware</h1>
<p><a href="http://androidthermostat.com/wp-content/uploads/2013/02/Firmware.jpg"><img src="http://androidthermostat.com/wp-content/uploads/2013/02/Firmware.jpg" alt="" title="Firmware" width="800" height="336" class="alignnone size-full wp-image-258"></a><br>
<em>This section of the instructions is for Windows users.  See <a href="https://github.com/ytai/ioio/wiki/IOIO-OTG-Bootloader-and-IOIODude">this page</a> for instructions on how to install the firmware on other platforms.</em></p>
<p><span style="background-color:#3a87ad;border-radius: 3px;-webkit-border-radius: 3px;display: inline-block;padding: 2px 4px;font-size: 11.844px;font-weight: bold;line-height: 14px;color: #ffffff;text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);white-space: nowrap;vertical-align: baseline;">Note:</span> By it’s nature of being an open source project that changes frequently, the potential for encountering a bug is higher with this thermostat than with static, simpler thermostats you’d buy at a store that undergo far more testing.  While your furnace is in control of the more dangerous aspects of your heater/AC, a major bug in your thermostat could still cause your house to get very hot or very cold while your gone which could be very bad for your pets or pipes.  The firmware code provides a second layer of protection against scenarios like this, by overriding the commands from your Android device whenever the temperature falls outside of a safe range of 45F – 95F and turning on/off your heater/ac until the temperature returns to a safe range.</p>
<p>Download <a href="https://github.com/ytai/ioio/raw/master/release/apps/IOIODude-0100.zip">IOIODude</a> an extract it to a folder on your computer.  Also download the <a href="https://raw.github.com/ytai/ioio/master/driver/ioio.inf">IOIO driver</a> and the <a href="https://github.com/AndroidThermostat/Firmware/raw/master/release/thermostat-rev-b.ioioapp">Revision B Firmware</a> and place them in the same folder.  Use a wire to jumper the boot pin on the IOIO-OTG (next to pin 34) to one of the ground pins.  Then connect the IOIO-OTG to your PC using a Micro-B USB cable.  The yellow status light should come on.  With it still connected to your computer, disconnect the cable jumpered to boot and you should see the yellow light flash a few times indicating it’s ready.</p>
<p>The Add New Hardware wizard should pop up and prompt you for a driver, but if not go to Devices &amp; Printers, right click on the IOIO, choose Properties, then Hardware and Properties again and click the Update Driver button.  Browse to the ioio.inf file you downloaded a moment ago and select it.  You will receive a warning about this driver not being signed.  Continue and once the driver is installed you should see a COM number next to the IOIO-OTG in Devices and Printers.</p>
<p><a href="http://androidthermostat.com/wp-content/uploads/2013/02/Cmd.jpg"><img src="http://androidthermostat.com/wp-content/uploads/2013/02/Cmd.jpg" alt="" title="Cmd" width="500" height="255" class="alignright size-full wp-image-260"></a>Open up a command prompt by pressing Windows-R and typing cmd and pressing enter.  Navigate to the IOIODude folder you extracted a moment ago.  Run the following command to verify you can communicate with the IOIO, replacing COM20 with the COM port shown in devices and printers:</p>
<p><em>ioiodude --port=COM20 versions</em></p>
<p>If it is successful then run:</p>
<p><em>ioiodude --port=COM20 --reset write thermostat-rev-b.ioioapp</em></p>
<p>The firmware has now been updated and you can disconnect the device.</p>
<h1>Step 3 – Assemble the Board</h1>
<h2>Solder the Header Pins to the IOIO-OTG</h2>
<p><a href="http://androidthermostat.com/wp-content/uploads/2013/04/IOIO.jpg"><img src="http://androidthermostat.com/wp-content/uploads/2013/04/IOIO-300x142.jpg" alt="" title="IOIO" width="400" height="191" class="alignright size-medium wp-image-286"></a><br>
You will need to break off a set of 3 headers, one set of 2 headers and two individual headers.  Connect the set of 3 headers to pins 5-7 on the IOIO-OTG.  You’ll need to mount these to the front of the IOIO-OTG, with the short end poking through to the back and solder them into place.  Connect the 2 headers to the inner most VIN and GND pins in the same way.  Connect the individual headers to the middle 5V pin and Pin 43 on the board and solder them in place.  Try to get these as straight as possible.  If you don’t have a solder aid, pressing the pins into a piece of styrofoam is a good way to keep them straight while you solder.</p>
<h2><a href="http://androidthermostat.com/wp-content/uploads/2013/02/assembled.jpg"><img class="alignright size-full wp-image-230" title="Assembled Thermostat Board" src="http://androidthermostat.com/wp-content/uploads/2013/02/assembled.jpg" alt="Assembled Thermostat Board" width="400" height="269"></a>Solder Components to Your Board</h2>
<p>You’re going to want to start with the smallest parts (diodes, resistors, transistors and temperature sensor) and work your way up to the largest parts when you connect these components.  The silk screen layer on the board shows where each one goes.  For every component except for the temperature sensor you’re going to want to mount it as close to the board as you can and trim off the leads, but on the temperature sensor, connect it as high as you can so you can bend the leads later to position it.</p>
<p>The direction doesn’t matter on the&nbsp;resistors or the ceramic capacitor, but it does on the transistors, diodes, other capacitors,&nbsp;rectifier&nbsp;and temperature sensor, so be careful to face them the right way. &nbsp;Again, the silk screen layer on the board indicates which way they should face. &nbsp; &nbsp;Also, the&nbsp;temperature&nbsp;sensor looks very similar to the diodes so make sure you don’t get them mixed up.</p>
<h2><a href="http://androidthermostat.com/wp-content/uploads/2013/02/ioio.jpg"><img class="alignright size-full wp-image-235" title="Thermostat with IOIO" src="http://androidthermostat.com/wp-content/uploads/2013/02/ioio.jpg" alt="Thermostat with IOIO" width="400" height="282"></a>Connect the Boards</h2>
<p>This part is a bit challenging.  Take the IOIO-OTG board with the attached headers and line them up with the <u>back side</u> of the thermostat board.  It’s easiest if you start with headers 5-7 first and then angle it down and use a pair of needle-nose plyers to align the remaining headers.  Once you get them all slid through the holes, adjust them so just a little bit of each pin is sticking through and then solder them from the front side of the thermostat board.  It’s a pretty tight fit, but do-able.</p>
<h1>Step 4 – Prepare Your Phone</h1>
<p><a href="http://androidthermostat.com/wp-content/uploads/2013/04/App.jpg"><img src="http://androidthermostat.com/wp-content/uploads/2013/04/App.jpg" alt="" title="App" width="400" height="250" class="alignright size-full wp-image-288"></a><br>
In order for the phone you will be using to communicate with the IOIO-OTG board, you will need to enable USB Debugging.  To do this, go to Settings -&gt; Applications -&gt; Development and check Android Debugging.  You will also need to download the Android Thermostat <a href="https://play.google.com/store/apps/details?id=com.androidthermostat.server">server</a> and <a href="https://play.google.com/store/apps/details?id=com.androidthermostat.client">client</a> applications from the Google Play store.  The server communicates with the IOIO and controls all of the thermostat opperations, but has no real interface.  The client application provides the interface for the thermostat and can also be run on another device to remotely control the thermostat.</p>
<h1>Step 5 – Create the Case</h1>
<h2>Print and Clip</h2>
<p><a href="http://androidthermostat.com/wp-content/uploads/2013/04/tabs.jpg"><img src="http://androidthermostat.com/wp-content/uploads/2013/04/tabs.jpg" alt="" title="tabs" width="800" height="173" class="alignnone size-full wp-image-323"></a></p>
<p>Download the <a href="https://github.com/AndroidThermostat/Case/tree/master/Revision%20B">STL files</a> and print them on a 3D printer.  If you don’t have access to a 3D Printer you can <a href="http://www.makexyz.com/3dprinters/?o=0&amp;sign=0f8b39756d3038088332b9cbd8ce3e83&amp;ref=769b1238471bb402b29f95952c6ae8f2">order a print here</a> for roughly $20. (black ABS plastic recommended)  When the print is finished, there will be round tabs at the corners of the case and lid.  These help hold the parts to the print bed while printing and are not needed.  Just clip them off with a pair of scissors.</p>
<h2>Glue on the Cap</h2>
<p><a href="http://androidthermostat.com/wp-content/uploads/2013/04/cap.jpg"><img src="http://androidthermostat.com/wp-content/uploads/2013/04/cap.jpg" alt="" title="cap" width="800" height="192" class="alignnone size-full wp-image-325"></a></p>
<p>One limitation of 3D printers is they can’t bridge large gaps like what is needed with the right arm piece that conceals the USB cable.  That is why it is necessary to glue the cap onto the right arm.  This is the only step that requires glue.  One side of the cap is slightly longer than the other, so arrange it so that it fits nicely on the end of the right arm and stick them together with superglue.</p>
<h2>Assemble the Lid</h2>
<p><a href="http://androidthermostat.com/wp-content/uploads/2013/04/lid.jpg"><img src="http://androidthermostat.com/wp-content/uploads/2013/04/lid.jpg" alt="" title="lid" width="800" height="239" class="alignnone size-full wp-image-327"></a></p>
<p>Place the gear into the hole in the lid, then insert the right arm (with the cap) on the side of the case without the lip and the left arm, on the side with the lip.  The tall parts on each arm will face out toward the front of the lid, on the side oposite of the gears.  Slide both of these pieces in half way until the first tooth on each arm touches a tooth on the gear.  Then push both pieces all the way in together.  These two sides will now move in tandem with each other to keep your phone centered on the case.</p>
<h2>Place the Board in the Case</h2>
<p><a href="http://androidthermostat.com/wp-content/uploads/2013/04/cable.jpg"><img src="http://androidthermostat.com/wp-content/uploads/2013/04/cable.jpg" alt="" title="cable" width="800" height="226" class="alignnone size-full wp-image-329"></a></p>
<p>Technically you don’t need to do this until after you put the case on the wall, but it’s probably best to do a practice run before hand.  Connect the two USB cables and plug in the USB-OTG (the smaller one) cable into the IOIO.  Run the cabled on the <u>back side</u> of the board, it should fit nicely in the space right next to the IOIO.  Flip it over and place it in the case as shown, with the USB connectors and cable running underneath the board and coming out of the slit on the right side of the case.  Finally, bend the temperature sensor down at a 90 degree angle so that it is sticking just outside of the android logo on the bottom of the case.</p>
<h2>Place the Lid on the Case</h2>
<p><a href="http://androidthermostat.com/wp-content/uploads/2013/04/assembled.jpg"><img src="http://androidthermostat.com/wp-content/uploads/2013/04/assembled.jpg" alt="" title="assembled" width="800" height="328" class="alignnone size-full wp-image-331"></a><br>
Slide the lip of the lid into the groove on the left side of the case.  You may have to fold the USB-OTG cable up slightly, but it’ll fit.  On the right side of the case, make sure the USB cable is sticking out the slot and then push the two tabs on the lid into the two holes on the case to lock it into place.  Pull the arms out a little bit and place your phone on the lip.  Connect the cable and slide the arms back in.  You can push any excess cable back into the case so that none is showing.</p>
<h1>Step 6 – Connect the Thermostat to Your Furnace</h1>
<p><a href="http://androidthermostat.com/wp-content/uploads/2013/04/wall.jpg"><img src="http://androidthermostat.com/wp-content/uploads/2013/04/wall.jpg" alt="" title="wall" width="800" height="192" class="alignnone size-full wp-image-333"></a></p>
<p>Now that you know how to assemble the case, it’s time to hook everything up to your furnace.  <u>Turn off the power to your furnace first</u> and disconnect your old thermostat.  Feed the furnace wires through the opening on the back of the case and screw the case to your wall.  Slide in your board with the USB cable tucked under and feed the USB cable out of the small hole on the right side.  Loosen each of the screw terminals and feed in the wires according to color.  The letters on the board indicate the color of wire.   There are two terminals for red wires R(ed)H(eat) and R(ed)C(ool). Some systems will have separate wires for each while others will have a single red wire.  If you have a single red wire, plug it into RH and use a small jumper wire to connect RH to RC.  Place the lid on the case and connect the phone as shown before.  Turn the power back on to the furnace.</p>
<h2>Step 7 – Configure</h2>
<p>You will need to set up your schedules, zip code and other preferences.  There is some heat generated by the switching regulator and depending on the air flow where you mount the thermostat you may need to adjust the temperature readings by a few degrees.  This can be done via the Equipment Settings screen.  Be sure to wait until your phone is fully charged and has been connected for at least 15 minutes in order to get a good starting point for the calibration.  You thermostat is now ready to be used!</p>
<p>If you have any questions or comments please stop by our <a href="http://reddit.com/r/androidthermostat">subreddit</a>.</p>
<p><i>NOTE: There are some risks involved in building your own thermostat. Safety has been a big concern of mine while building this and there are several safety measures taken such as using relays that fail open, limiting the allowable temperature range and the need for a cyan power line restricting availability to modern furnaces with built in safeguards. I have no formal training in this area though. <b>BUILD AND USE AT YOUR OWN RISK</b>.</i></p>
          </div>











    <footer class="entry-meta">
          </footer><!-- .entry-meta -->
  </article><!-- #post -->

      
    </div><!-- #content -->
  </div><!-- #primary -->

  </div><!-- #main .wrapper -->
</div><!-- #page -->


<!-- tracker added by Ultimate Google Analytics plugin v1.6.0: http://www.oratransplant.nl/uga -->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-34742925-1");
pageTracker._initData();
pageTracker._trackPageview();
</script>
<script type='text/javascript' src='/javascripts/navigation.js?ver=1.0'></script>
</body>
</html>
